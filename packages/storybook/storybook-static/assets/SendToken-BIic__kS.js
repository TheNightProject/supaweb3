import{r as b,c as k,i as j,b as o,f as e,d,t as l,l as K,e as Q,w as $,v as D,n as p,F as M,g as O,h as n}from"./vue.esm-bundler-DxM0YtBV.js";import{_ as W}from"./Web3Icon-CMoc-ptT.js";const X={class:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-gray-800"},Y={class:"mb-6"},Z={class:"text-xl font-semibold text-gray-900 dark:text-white"},ee={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},te={class:"mb-6"},ae={class:"flex items-center space-x-3"},se={class:"text-left"},le={class:"font-medium text-gray-900 dark:text-white"},ne={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},oe={class:"mb-6"},re={class:"space-y-2"},de={class:"relative"},ue={class:"absolute right-3 top-1/2 -translate-y-1/2"},ie={key:0,class:"h-5 w-5 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"},ce={key:1,class:"h-5 w-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ve={key:2,class:"h-5 w-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me={key:0,class:"rounded bg-blue-50 p-2 text-sm dark:bg-blue-900/20"},ye={class:"text-blue-700 dark:text-blue-400"},be={key:1,class:"text-sm text-red-600 dark:text-red-400"},ge={key:2,class:"space-y-1"},ke={class:"flex flex-wrap gap-2"},fe=["onClick"],xe={class:"mb-6"},pe={class:"mb-2 flex items-center justify-between"},he={class:"relative"},we={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 text-sm font-medium text-gray-600 dark:text-gray-400"},Te={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},Se={key:1,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Ce={key:0,class:"mb-6"},_e={class:"grid grid-cols-3 gap-2"},Be=["onClick"],Fe={class:"font-medium text-gray-900 dark:text-white"},Ae={class:"text-sm text-gray-600 dark:text-gray-400"},Ee={class:"text-xs text-gray-500 dark:text-gray-500"},Ne={key:1,class:"mb-6 rounded-lg bg-gray-50 p-4 dark:bg-gray-900/50"},Ve={class:"space-y-2 text-sm"},je={class:"flex justify-between"},$e={class:"font-mono text-gray-900 dark:text-white"},De={class:"flex justify-between"},Me={class:"font-mono text-gray-900 dark:text-white"},Oe={class:"flex justify-between"},Re={class:"font-medium text-gray-900 dark:text-white"},Ie={key:0,class:"flex justify-between"},Pe={class:"text-gray-900 dark:text-white"},Ge={class:"border-t border-gray-200 pt-2 dark:border-gray-700"},Le={class:"flex justify-between font-medium"},Ue={class:"text-gray-900 dark:text-white"},ze=["disabled"],He={key:0,class:"flex items-center justify-center space-x-2"},qe={key:1},Je={key:2,class:"mt-4 text-xs text-gray-500 dark:text-gray-400"},Ke={__name:"SendToken",props:{title:{type:String,default:"Send Token"},subtitle:{type:String,default:""},selectedToken:{type:Object,default:()=>({symbol:"ETH",balance:"10.5",price:2500,decimals:18})},fromAddress:{type:String,default:"0x742d35Cc6C4C4C7218243e428F9e99F50934e47E"},addressBook:{type:Array,default:()=>[]},showAddressBook:{type:Boolean,default:!0},showGasOptions:{type:Boolean,default:!0},showPreview:{type:Boolean,default:!0},showDisclaimer:{type:Boolean,default:!0},disclaimer:{type:String,default:"Double-check all details before sending. Transactions cannot be reversed."},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Sending..."},className:{type:String,default:""}},emits:["select-token","send","ens-resolve","gas-estimate"],setup(s,{emit:R}){const u=s,h=R,c=b(""),i=b(""),v=b(""),y=b(""),x=b(!1),m=b(""),g=b(""),f=b("standard"),F=[{type:"slow",label:"Slow",time:"~5 min",cost:"2.50"},{type:"standard",label:"Standard",time:"~2 min",cost:"3.75"},{type:"fast",label:"Fast",time:"~30 sec",cost:"5.25"}],w=k(()=>{const a=F.find(t=>t.type===f.value);return(a==null?void 0:a.cost)||"0"}),T=k(()=>!i.value||!u.selectedToken.price?null:(parseFloat(i.value)*u.selectedToken.price).toFixed(2)),A=k(()=>{const a=T.value?parseFloat(T.value):0,t=parseFloat(w.value);return(a+t).toFixed(2)}),E=k(()=>m.value||_(c.value)),N=k(()=>i.value&&E.value&&u.selectedToken.symbol),C=k(()=>N.value&&!v.value&&!y.value&&!x.value&&!u.loading),I=k(()=>u.selectedToken.symbol?c.value?i.value?v.value||y.value?"Fix Errors":x.value?"Resolving ENS...":`Send ${u.selectedToken.symbol}`:"Enter Amount":"Enter Recipient":"Select Token"),_=a=>/^0x[a-fA-F0-9]{40}$/.test(a),P=a=>a.includes(".")&&!_(a),S=a=>a?`${a.slice(0,6)}...${a.slice(-4)}`:"",V=async()=>{if(v.value="",m.value="",g.value="",!c.value){v.value="Recipient address is required";return}if(_(c.value)){m.value=c.value;return}if(P(c.value)){await G(c.value);return}v.value="Invalid address or ENS name"},G=async a=>{x.value=!0,g.value=a;try{if(await new Promise(t=>setTimeout(t,1e3)),a==="vitalik.eth")m.value="0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045";else if(a==="test.eth")m.value="0x742d35Cc6C4C4C7218243e428F9e99F50934e47E";else throw new Error("ENS name not found");h("ens-resolve",{name:a,address:m.value})}catch{v.value=`Could not resolve ENS name: ${a}`,g.value=""}finally{x.value=!1}},L=()=>{v.value&&(v.value=""),m.value="",g.value=""},B=()=>{if(y.value="",!i.value)return;const a=parseFloat(i.value);if(isNaN(a)||a<=0){y.value="Amount must be greater than 0";return}if(u.selectedToken.balance){const t=parseFloat(u.selectedToken.balance);if(a>t){y.value="Insufficient balance";return}}},U=()=>{u.selectedToken.balance&&(i.value=u.selectedToken.balance,B())},z=()=>{h("select-token")},H=a=>{c.value=a.address,V()},q=()=>{if(!C.value)return;const a={from:u.fromAddress,to:m.value||c.value,amount:i.value,token:u.selectedToken,gasOption:f.value,estimatedGas:w.value,totalCost:A.value,ensName:g.value||null};h("send",a)};return j(()=>i.value,B),j(()=>f.value,()=>{h("gas-estimate",{gasOption:f.value,amount:i.value,token:u.selectedToken})}),(a,t)=>(n(),o("div",{class:p(["send-token",s.className])},[e("div",X,[e("div",Y,[e("h2",Z,l(s.title),1),s.subtitle?(n(),o("p",ee,l(s.subtitle),1)):d("",!0)]),e("form",{onSubmit:K(q,["prevent"])},[e("div",te,[t[3]||(t[3]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Token ",-1)),e("button",{type:"button",onClick:z,class:"flex w-full items-center justify-between rounded-lg border border-gray-300 bg-gray-50 p-3 transition-colors hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:bg-gray-600"},[e("div",ae,[s.selectedToken.symbol?(n(),Q(W,{key:0,type:"tokens",symbol:s.selectedToken.symbol,size:24},null,8,["symbol"])):d("",!0),e("div",se,[e("div",le,l(s.selectedToken.symbol||"Select Token"),1),s.selectedToken.balance?(n(),o("div",ne," Balance: "+l(s.selectedToken.balance),1)):d("",!0)])]),t[2]||(t[2]=e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])]),e("div",oe,[t[7]||(t[7]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Recipient Address ",-1)),e("div",re,[e("div",de,[$(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>c.value=r),type:"text",placeholder:"0x... or ENS name",class:p(["w-full rounded-lg border px-4 py-3 pr-12 focus:border-blue-500 focus:outline-none",v.value?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600","dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"]),onBlur:V,onInput:L},null,34),[[D,c.value]]),e("div",ue,[x.value?(n(),o("div",ie)):E.value&&m.value?(n(),o("svg",ce,[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):v.value?(n(),o("svg",ve,[...t[5]||(t[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):d("",!0)])]),g.value&&m.value?(n(),o("div",me,[e("span",ye,l(g.value)+" → "+l(S(m.value)),1)])):d("",!0),v.value?(n(),o("div",be,l(v.value),1)):d("",!0),s.showAddressBook&&s.addressBook.length>0?(n(),o("div",ge,[t[6]||(t[6]=e("div",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Recent addresses:",-1)),e("div",ke,[(n(!0),o(M,null,O(s.addressBook.slice(0,3),r=>(n(),o("button",{key:r.address,type:"button",onClick:J=>H(r),class:"rounded-full bg-gray-100 px-3 py-1 text-xs text-gray-700 transition-colors hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},l(r.name||S(r.address)),9,fe))),128))])])):d("",!0)])]),e("div",xe,[e("div",pe,[t[8]||(t[8]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Amount ",-1)),s.selectedToken.balance?(n(),o("button",{key:0,type:"button",onClick:U,class:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"}," Max: "+l(s.selectedToken.balance),1)):d("",!0)]),e("div",he,[$(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>i.value=r),type:"number",step:"any",placeholder:"0.0",class:p(["w-full rounded-lg border px-4 py-3 text-lg font-medium focus:border-blue-500 focus:outline-none",y.value?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600","dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"]),onInput:B},null,34),[[D,i.value]]),s.selectedToken.symbol?(n(),o("div",we,l(s.selectedToken.symbol),1)):d("",!0)]),T.value?(n(),o("div",Te," ≈ $"+l(T.value),1)):d("",!0),y.value?(n(),o("div",Se,l(y.value),1)):d("",!0)]),s.showGasOptions?(n(),o("div",Ce,[t[9]||(t[9]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Transaction Speed ",-1)),e("div",_e,[(n(),o(M,null,O(F,r=>e("button",{key:r.type,type:"button",onClick:J=>f.value=r.type,class:p(["rounded-lg border p-3 text-center transition-colors",f.value===r.type?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700"])},[e("div",Fe,l(r.label),1),e("div",Ae,l(r.time),1),e("div",Ee,"$"+l(r.cost),1)],10,Be)),64))])])):d("",!0),s.showPreview&&N.value?(n(),o("div",Ne,[t[15]||(t[15]=e("h3",{class:"mb-3 font-medium text-gray-900 dark:text-white"},"Transaction Preview",-1)),e("div",Ve,[e("div",je,[t[10]||(t[10]=e("span",{class:"text-gray-600 dark:text-gray-400"},"From:",-1)),e("span",$e,l(S(s.fromAddress)),1)]),e("div",De,[t[11]||(t[11]=e("span",{class:"text-gray-600 dark:text-gray-400"},"To:",-1)),e("span",Me,l(S(m.value||c.value)),1)]),e("div",Oe,[t[12]||(t[12]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Amount:",-1)),e("span",Re,l(i.value)+" "+l(s.selectedToken.symbol),1)]),w.value?(n(),o("div",Ie,[t[13]||(t[13]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Network Fee:",-1)),e("span",Pe,"$"+l(w.value),1)])):d("",!0),e("div",Ge,[e("div",Le,[t[14]||(t[14]=e("span",{class:"text-gray-900 dark:text-white"},"Total Cost:",-1)),e("span",Ue,"$"+l(A.value),1)])])])])):d("",!0),e("button",{type:"submit",disabled:!C.value||s.loading,class:p(["w-full rounded-lg px-4 py-3 font-semibold transition-colors",C.value&&!s.loading?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400"])},[s.loading?(n(),o("div",He,[t[16]||(t[16]=e("div",{class:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"},null,-1)),e("span",null,l(s.loadingText),1)])):(n(),o("span",qe,l(I.value),1))],10,ze),s.showDisclaimer?(n(),o("div",Je,l(s.disclaimer),1)):d("",!0)],32)])],2))}};Ke.__docgenInfo={exportName:"default",displayName:"SendToken",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:"'Send Token'"}},{name:"subtitle",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"selectedToken",type:{name:"object"},defaultValue:{func:!1,value:`{
  symbol: 'ETH',
  balance: '10.5',
  price: 2500,
  decimals: 18
}`}},{name:"fromAddress",type:{name:"string"},defaultValue:{func:!1,value:"'0x742d35Cc6C4C4C7218243e428F9e99F50934e47E'"}},{name:"addressBook",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"showAddressBook",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showGasOptions",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showPreview",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showDisclaimer",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"disclaimer",type:{name:"string"},defaultValue:{func:!1,value:"'Double-check all details before sending. Transactions cannot be reversed.'"}},{name:"loading",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"loadingText",type:{name:"string"},defaultValue:{func:!1,value:"'Sending...'"}},{name:"className",type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"select-token"},{name:"send"},{name:"ens-resolve"},{name:"gas-estimate"}],sourceFiles:["/Users/steve/Projects/tnp.web.supaweb3/packages/ui/src/components/tokens/SendToken.vue"]};export{Ke as _};
