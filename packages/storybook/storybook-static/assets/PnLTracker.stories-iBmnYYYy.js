import{r as m,c as y,b as i,f as e,d as b,t as r,w as f,s as T,u as Z,n as d,F as S,g as F,v as R,k as j,h as o}from"./vue.esm-bundler-DxM0YtBV.js";const Y={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},O={class:"p-6 border-b border-gray-200 dark:border-gray-700"},q={class:"flex items-center justify-between mb-4"},Q={class:"text-2xl font-bold text-gray-900 dark:text-white"},W={key:0,class:"text-gray-600 dark:text-gray-300 mt-1"},G={class:"flex items-center gap-3"},J={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},K={class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg"},X={class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg"},_={class:"text-sm text-gray-500 dark:text-gray-400"},ee={class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg"},te={class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg"},ae={class:"text-xl font-bold text-gray-900 dark:text-white"},re={class:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"},ne={class:"flex flex-wrap items-center gap-4"},se={class:"flex items-center gap-2"},le=["value"],ie={class:"flex items-center gap-2"},oe={class:"flex items-center gap-2"},de={class:"p-6"},ue={class:"flex items-center justify-between mb-4"},xe={class:"flex items-center gap-2"},ge={class:"space-y-3"},me={class:"flex items-center gap-4"},ye={class:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-medium"},ce={class:"font-medium text-gray-900 dark:text-white"},pe={class:"text-sm text-gray-500 dark:text-gray-400"},ve={class:"text-right"},be={class:"flex items-center gap-4"},fe={class:"text-right"},Pe={class:"font-medium text-gray-900 dark:text-white"},ke={class:"text-right"},he={class:"font-medium text-gray-900 dark:text-white"},we={class:"text-right"},Te={class:"font-medium text-gray-900 dark:text-white"},Le={class:"text-right min-w-[100px]"},ze={class:"text-right"},Se={key:0,class:"flex items-center justify-between mt-6"},Fe={class:"text-sm text-gray-500 dark:text-gray-400"},Ve={class:"flex items-center gap-2"},Ce=["disabled"],Ae={class:"px-3 py-1 text-sm text-gray-900 dark:text-white"},De=["disabled"],Me={key:0,class:"p-6 border-t border-gray-200 dark:border-gray-700 bg-yellow-50 dark:bg-yellow-900/20"},Be={class:"flex items-start gap-3"},Ue={class:"text-sm text-yellow-700 dark:text-yellow-300"},U={__name:"PnLTracker",props:{title:{type:String,default:"P&L Tracker"},subtitle:{type:String,default:""},totalPnL:{type:Number,default:0},totalPnLPercent:{type:Number,default:0},realizedPnL:{type:Number,default:0},unrealizedPnL:{type:Number,default:0},realizedTransactions:{type:Number,default:0},taxLiability:{type:Number,default:0},transactions:{type:Array,default:()=>[]},availableAssets:{type:Array,default:()=>[]},showTaxReport:{type:Boolean,default:!0},showTaxInfo:{type:Boolean,default:!0},showPagination:{type:Boolean,default:!0},taxMethod:{type:String,default:"FIFO"},taxYear:{type:String,default:new Date().getFullYear().toString()},itemsPerPage:{type:Number,default:10}},emits:["period-change","asset-filter","type-filter","amount-filter","export-pnl","generate-tax-report"],setup(n,{emit:$e}){const p=n,k=m("month"),u=m(""),x=m(""),g=m(""),L=m(""),l=m(1),v=y(()=>{let s=p.transactions;return u.value&&(s=s.filter(t=>t.asset===u.value)),x.value&&(s=s.filter(t=>t.status===x.value)),g.value&&(s=s.filter(t=>Math.abs(t.pnl)>=parseFloat(g.value))),s.sort((t,a)=>new Date(a.date)-new Date(t.date))}),h=y(()=>Math.ceil(v.value.length/p.itemsPerPage)),w=y(()=>(l.value-1)*p.itemsPerPage),z=y(()=>w.value+p.itemsPerPage),$=y(()=>v.value.slice(w.value,z.value)),N=()=>{u.value="",x.value="",g.value="",L.value="",l.value=1},I=()=>{l.value<h.value&&l.value++},E=()=>{l.value>1&&l.value--},H=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(s,t)=>(o(),i("div",Y,[e("div",O,[e("div",q,[e("div",null,[e("h2",Q,r(n.title||"P&L Tracker"),1),n.subtitle?(o(),i("p",W,r(n.subtitle),1)):b("",!0)]),e("div",G,[f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>k.value=a),onChange:t[1]||(t[1]=a=>s.$emit("period-change",k.value)),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},[...t[10]||(t[10]=[Z('<option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="quarter">This Quarter</option><option value="year">This Year</option><option value="all">All Time</option>',6)])],544),[[T,k.value]]),n.showTaxReport?(o(),i("button",{key:0,onClick:t[2]||(t[2]=a=>s.$emit("generate-tax-report")),class:"bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-lg transition-colors text-sm"}," Tax Report ")):b("",!0)])]),e("div",J,[e("div",K,[t[11]||(t[11]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400 mb-1"},"Total P&L",-1)),e("div",{class:d(["text-xl font-bold",n.totalPnL>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},r(n.totalPnL>=0?"+":"")+"$"+r(Math.abs(n.totalPnL).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),3),e("div",{class:d(["text-sm",n.totalPnLPercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},r(n.totalPnLPercent>=0?"+":"")+r(n.totalPnLPercent.toFixed(2))+"% ",3)]),e("div",X,[t[12]||(t[12]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400 mb-1"},"Realized P&L",-1)),e("div",{class:d(["text-xl font-bold",n.realizedPnL>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},r(n.realizedPnL>=0?"+":"")+"$"+r(Math.abs(n.realizedPnL).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),3),e("div",_,r(n.realizedTransactions)+" transactions ",1)]),e("div",ee,[t[13]||(t[13]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400 mb-1"},"Unrealized P&L",-1)),e("div",{class:d(["text-xl font-bold",n.unrealizedPnL>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},r(n.unrealizedPnL>=0?"+":"")+"$"+r(Math.abs(n.unrealizedPnL).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),3),t[14]||(t[14]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"}," Current positions ",-1))]),e("div",te,[t[15]||(t[15]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400 mb-1"},"Tax Liability",-1)),e("div",ae," $"+r(n.taxLiability.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),t[16]||(t[16]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"}," Estimated ",-1))])])]),e("div",re,[e("div",ne,[e("div",se,[t[18]||(t[18]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Asset:",-1)),f(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>u.value=a),onChange:t[4]||(t[4]=a=>s.$emit("asset-filter",u.value)),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},[t[17]||(t[17]=e("option",{value:""},"All Assets",-1)),(o(!0),i(S,null,F(n.availableAssets,a=>(o(),i("option",{key:a,value:a},r(a),9,le))),128))],544),[[T,u.value]])]),e("div",ie,[t[20]||(t[20]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Type:",-1)),f(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>x.value=a),onChange:t[6]||(t[6]=a=>s.$emit("type-filter",x.value)),class:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},[...t[19]||(t[19]=[e("option",{value:""},"All Types",-1),e("option",{value:"realized"},"Realized",-1),e("option",{value:"unrealized"},"Unrealized",-1)])],544),[[T,x.value]])]),e("div",oe,[t[21]||(t[21]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Min Amount:",-1)),f(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=a=>g.value=a),onInput:t[8]||(t[8]=a=>s.$emit("amount-filter",{min:g.value,max:L.value})),placeholder:"0",class:"w-20 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},null,544),[[R,g.value]])]),e("button",{onClick:N,class:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"}," Clear Filters ")])]),e("div",de,[e("div",ue,[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Recent P&L Transactions ",-1)),e("div",xe,[e("button",{onClick:t[9]||(t[9]=a=>s.$emit("export-pnl")),class:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300 flex items-center gap-1"},[...t[22]||(t[22]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),j(" Export ",-1)])])])]),e("div",ge,[(o(!0),i(S,null,F($.value,a=>(o(),i("div",{key:a.id,class:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors"},[e("div",me,[e("div",ye,r(a.asset.charAt(0)),1),e("div",null,[e("div",ce,r(a.type)+" "+r(a.asset),1),e("div",pe,r(H(a.date)),1)])]),e("div",ve,[e("div",be,[e("div",fe,[t[24]||(t[24]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Amount",-1)),e("div",Pe,r(a.amount)+" "+r(a.asset),1)]),e("div",ke,[t[25]||(t[25]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Entry Price",-1)),e("div",he," $"+r(a.entryPrice.toFixed(2)),1)]),e("div",we,[t[26]||(t[26]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Exit Price",-1)),e("div",Te,r(a.exitPrice?`$${a.exitPrice.toFixed(2)}`:"N/A"),1)]),e("div",Le,[t[27]||(t[27]=e("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"P&L",-1)),e("div",{class:d(["font-semibold",a.pnl>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},r(a.pnl>=0?"+":"")+"$"+r(Math.abs(a.pnl).toFixed(2)),3),e("div",{class:d(["text-xs",a.pnlPercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},r(a.pnlPercent>=0?"+":"")+r(a.pnlPercent.toFixed(1))+"% ",3)]),e("div",ze,[e("span",{class:d(["px-2 py-1 text-xs font-medium rounded-full",a.status==="realized"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"])},r(a.status),3)])])])]))),128))]),n.showPagination?(o(),i("div",Se,[e("div",Fe," Showing "+r(w.value+1)+"-"+r(Math.min(z.value,v.value.length))+" of "+r(v.value.length)+" transactions ",1),e("div",Ve,[e("button",{onClick:E,disabled:l.value===1,class:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Ce),e("span",Ae,r(l.value)+" / "+r(h.value),1),e("button",{onClick:I,disabled:l.value===h.value,class:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,De)])])):b("",!0)]),n.showTaxInfo?(o(),i("div",Me,[e("div",Be,[t[29]||(t[29]=e("svg",{class:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",null,[t[28]||(t[28]=e("div",{class:"font-medium text-yellow-800 dark:text-yellow-200 mb-1"}," Tax Information ",-1)),e("div",Ue," Tax calculations are estimates based on "+r(n.taxMethod)+" method. Consult a tax professional for accurate reporting. "+r(n.taxYear)+" tax year shown. ",1)])])])):b("",!0)]))}};U.__docgenInfo={exportName:"default",displayName:"PnLTracker",description:"",tags:{},props:[{name:"title",type:{name:"string"},defaultValue:{func:!1,value:"'P&L Tracker'"}},{name:"subtitle",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"totalPnL",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"totalPnLPercent",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"realizedPnL",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"unrealizedPnL",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"realizedTransactions",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"taxLiability",type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"transactions",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"availableAssets",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"showTaxReport",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showTaxInfo",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"showPagination",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"taxMethod",type:{name:"string"},defaultValue:{func:!1,value:"'FIFO'"}},{name:"taxYear",type:{name:"string"},defaultValue:{func:!1,value:"new Date().getFullYear().toString()"}},{name:"itemsPerPage",type:{name:"number"},defaultValue:{func:!1,value:"10"}}],events:[{name:"period-change"},{name:"generate-tax-report"},{name:"asset-filter"},{name:"type-filter"},{name:"amount-filter"},{name:"export-pnl"}],sourceFiles:["/Users/steve/Projects/tnp.web.supaweb3/packages/ui/src/components/portfolio/PnLTracker.vue"]};const Ie={title:"Portfolio/PnLTracker",component:U,parameters:{layout:"centered",docs:{description:{component:"Advanced profit and loss tracking with tax reporting capabilities for comprehensive portfolio analysis."}}},decorators:[()=>({template:'<div class="min-w-[900px] max-w-[1200px]"><story /></div>'})],tags:["autodocs"]},c={args:{title:"P&L Tracker",subtitle:"Track your trading performance and tax obligations",totalPnL:15420.75,totalPnLPercent:18.5,realizedPnL:8500.25,unrealizedPnL:6920.5,realizedTransactions:147,taxLiability:2125.06,transactions:[{id:"1",asset:"ETH",type:"Buy",amount:"5.0",entryPrice:2e3,exitPrice:2500,pnl:2500,pnlPercent:25,status:"realized",date:"2024-09-28T14:30:00Z"},{id:"2",asset:"BTC",type:"Sell",amount:"0.5",entryPrice:45e3,exitPrice:5e4,pnl:2500,pnlPercent:11.1,status:"realized",date:"2024-09-27T09:15:00Z"},{id:"3",asset:"UNI",type:"Hold",amount:"500",entryPrice:8.5,exitPrice:null,pnl:750,pnlPercent:17.6,status:"unrealized",date:"2024-09-25T16:45:00Z"}],availableAssets:["ETH","BTC","UNI","USDC","SUPA"],showTaxReport:!0,showTaxInfo:!0,taxMethod:"FIFO",taxYear:"2024"}},P={args:{...c.args,title:"P&L Tracker - Bear Market",totalPnL:-8750.25,totalPnLPercent:-12.3,realizedPnL:-5200,unrealizedPnL:-3550.25,taxLiability:0,transactions:[{id:"1",asset:"ETH",type:"Sell",amount:"3.0",entryPrice:3e3,exitPrice:2200,pnl:-2400,pnlPercent:-26.7,status:"realized",date:"2024-09-28T14:30:00Z"},{id:"2",asset:"BTC",type:"Hold",amount:"0.25",entryPrice:55e3,exitPrice:null,pnl:-2625,pnlPercent:-19.1,status:"unrealized",date:"2024-09-25T11:20:00Z"}]}};var V,C,A;c.parameters={...c.parameters,docs:{...(V=c.parameters)==null?void 0:V.docs,source:{originalSource:`{
  args: {
    title: 'P&L Tracker',
    subtitle: 'Track your trading performance and tax obligations',
    totalPnL: 15420.75,
    totalPnLPercent: 18.5,
    realizedPnL: 8500.25,
    unrealizedPnL: 6920.50,
    realizedTransactions: 147,
    taxLiability: 2125.06,
    transactions: [{
      id: '1',
      asset: 'ETH',
      type: 'Buy',
      amount: '5.0',
      entryPrice: 2000.00,
      exitPrice: 2500.00,
      pnl: 2500.00,
      pnlPercent: 25.0,
      status: 'realized',
      date: '2024-09-28T14:30:00Z'
    }, {
      id: '2',
      asset: 'BTC',
      type: 'Sell',
      amount: '0.5',
      entryPrice: 45000.00,
      exitPrice: 50000.00,
      pnl: 2500.00,
      pnlPercent: 11.1,
      status: 'realized',
      date: '2024-09-27T09:15:00Z'
    }, {
      id: '3',
      asset: 'UNI',
      type: 'Hold',
      amount: '500',
      entryPrice: 8.50,
      exitPrice: null,
      pnl: 750.00,
      pnlPercent: 17.6,
      status: 'unrealized',
      date: '2024-09-25T16:45:00Z'
    }],
    availableAssets: ['ETH', 'BTC', 'UNI', 'USDC', 'SUPA'],
    showTaxReport: true,
    showTaxInfo: true,
    taxMethod: 'FIFO',
    taxYear: '2024'
  }
}`,...(A=(C=c.parameters)==null?void 0:C.docs)==null?void 0:A.source}}};var D,M,B;P.parameters={...P.parameters,docs:{...(D=P.parameters)==null?void 0:D.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    title: 'P&L Tracker - Bear Market',
    totalPnL: -8750.25,
    totalPnLPercent: -12.3,
    realizedPnL: -5200.00,
    unrealizedPnL: -3550.25,
    taxLiability: 0,
    transactions: [{
      id: '1',
      asset: 'ETH',
      type: 'Sell',
      amount: '3.0',
      entryPrice: 3000.00,
      exitPrice: 2200.00,
      pnl: -2400.00,
      pnlPercent: -26.7,
      status: 'realized',
      date: '2024-09-28T14:30:00Z'
    }, {
      id: '2',
      asset: 'BTC',
      type: 'Hold',
      amount: '0.25',
      entryPrice: 55000.00,
      exitPrice: null,
      pnl: -2625.00,
      pnlPercent: -19.1,
      status: 'unrealized',
      date: '2024-09-25T11:20:00Z'
    }]
  }
}`,...(B=(M=P.parameters)==null?void 0:M.docs)==null?void 0:B.source}}};const Ee=["Default","BearMarket"];export{P as BearMarket,c as Default,Ee as __namedExportsOrder,Ie as default};
